# ESP32와 Arduino R4 UART 통신 프로젝트

## 버전 정보

### 버전 1.0.0 (2025-03-31)

I2C 통신에서 UART 통신으로 마이그레이션하는 첫 버전입니다.

## 주요 기능

1. ESP32와 Arduino R4 간 UART 통신 구현
2. 릴레이 제어 기능 (팬, LED, 가습기)
3. 센서 데이터 송수신 (온도, 습도)
4. 명령어 기반 통신 프로토콜
5. 디버깅을 위한 시리얼 모니터 출력

## 하드웨어 연결

### ESP32 연결
- UART2 사용: RX(GPIO16), TX(GPIO17)
- 디버깅용 USB 시리얼 포트는 별도로 사용 가능 (UART0)

### Arduino R4 연결
- Serial1 사용: RX(핀 0), TX(핀 1)
- 릴레이 제어: 팬(D2), LED(D3), 가습기(D4)
- 센서 연결: 온도(A0), 습도(A1) - 테스트용 더미 값 생성

## 통신 프로토콜

### 명령어 정의
- F: 팬 켜기
- f: 팬 끄기
- L: LED 켜기
- l: LED 끄기
- H: 가습기 켜기
- h: 가습기 끄기
- S: 모든 릴레이 상태 요청
- T: 온도 데이터 요청
- U: 습도 데이터 요청

### 데이터 형식
- 명령: 단일 문자 (\n으로 종료)
- 응답: "키:값" 형식 (\n으로 종료)
  - 예: "FAN:ON", "TEMP:23.5", "HUM_VAL:55.0"

## 사용 방법

### ESP32 제어
1. ESP32의 시리얼 모니터를 통해 다음 명령어로 릴레이 제어 가능:
   - 1: 팬 토글
   - 2: LED 토글
   - 3: 가습기 토글
   - s: 상태 요청
   - t: 온도 요청
   - h: 습도 요청
   - ?: 도움말 표시

2. 센서 데이터는 5초마다 자동으로 업데이트됨

### Arduino R4
1. ESP32로부터 명령을 수신하여 릴레이 제어
2. 2초마다 자동으로 센서 데이터 업데이트 및 전송

## 장점

1. I2C 통신 문제 해결 - 더 안정적인 통신 방식
2. 디버깅이 용이함 - ESP32에서 UART0와 UART2를 동시에 사용 가능
3. 명확한 명령어 기반 프로토콜 구현
4. 양방향 통신 용이

## 변경 이력

### 버전 1.0.0 (2025-03-31)
- UART 통신으로 초기 마이그레이션
- ESP32에서 UART2(GPIO16/17) 사용
- Arduino R4에서 Serial1(핀 0/1) 사용
- 명령어 기반 통신 프로토콜 구현
- 릴레이 제어 및 센서 데이터 송수신 기능 구현
